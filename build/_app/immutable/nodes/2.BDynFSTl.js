var we=Object.defineProperty;var ke=(t,e,a)=>e in t?we(t,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[e]=a;var G=(t,e,a)=>(ke(t,typeof e!="symbol"?e+"":e,a),a);import{h as R,o as le,p as ge,g as Q,i as oe,q as Ee,r as Se,a as D,t as M,b as C,k as $,f as U,s as Ne,c as z,d as Ie,j as Ce}from"../chunks/disclose-version.Ba4OB8xc.js";import{l as Te,L as Oe,H as Re,o as De,I as He,q as de,t as _e,v as Le,a1 as Me,k as qe,b as Be,a2 as P,s as N,a3 as ee,a4 as X,m as Y,Z as fe,a5 as ze,a6 as Ke,a7 as Fe,a8 as he,a9 as Pe,V as We,W as Ye,aa as Ve,a as te,p as ae,g as I,r as K,ab as A}from"../chunks/runtime.DYmp-ke1.js";import{p as Ge,i as Qe}from"../chunks/props.sGfjqtvt.js";import{i as se}from"../chunks/lifecycle.W1ErOSG4.js";import{u as Je,a as Ue,s as B,p as Xe}from"../chunks/stores.C87B263X.js";import{d as me,w as Ze,r as je,b as et,p as ve}from"../chunks/entry.Cn78Lccf.js";let J=null;function Z(t,e){return e}function tt(t,e,a){for(var s=[],n=t.length,o=0;o<n;o++)ze(t[o].e,s,!0);if(n>0&&s.length===0&&e!==null){var l=e.parentNode;l.textContent="",l.append(e)}Ke(s,()=>{for(var d=0;d<n;d++)Fe(t[d].e);a!==void 0&&a()})}function j(t,e,a,s,n,o=null){var l={flags:e,items:new Map,next:null},d=(e&he)!==0;if(d){var c=t;t=R?le(c.firstChild):c.appendChild(ge())}var p=null;Te(()=>{var g=a(),r=Oe(g)?g:g==null?[]:Array.from(g),_=r.length,f=l.flags;f&X&&!We(r)&&!(Ye in r)&&(f^=X,f&Ve&&!(f&P)&&(f^=P));let y=!1;if(R){var x=t.data===Re;x!==(_===0)&&(De(oe),Q(!1),y=!0)}if(R){for(var u=oe[0],b=l,h,i=0;i<_;i++){if(u.nodeType!==8||u.data!==He){y=!0,Q(!1);break}var v=u;u=le(u);var w=r[i],T=s(w,i);h=ye(v,u,b,null,w,T,i,n,f),l.items.set(T,h),u=u.nextSibling,b=h}if(_>0)for(;u!==t;){var k=u.nextSibling;u.remove(),u=k}}R||at(r,l,t,n,f,s),o!==null&&(_===0?p?de(p):p=_e(()=>o(t)):p!==null&&Le(p,()=>{p=null})),y&&Q(!0)})}function at(t,e,a,s,n,o){var q,re,ie,ne;var l=(n&Pe)!==0,d=(n&(P|ee))!==0,c=t.length,p=e.items,g=e.next,r=g,_=new Set,f=e,y=new Set,x=[],u=[],b,h,i,v;if(l)for(v=0;v<c;v+=1)b=t[v],h=o(b,v),i=p.get(h),i!==void 0&&((q=i.a)==null||q.measure(),y.add(i));for(v=0;v<c;v+=1){if(b=t[v],h=o(b,v),i=p.get(h),i===void 0){var w=Ee(ge()),T=r?r.o:a;T.before(w),f=ye(w,T,f,f.next,b,h,v,s,n),p.set(h,f),x=[],u=[],r=f.next;continue}if(d&&st(i,b,v,n),i.e.f&Me&&(de(i.e),l&&((re=i.a)==null||re.unfix(),y.delete(i))),i!==r){if(_.has(i)){if(x.length<u.length){var k=u[0],E;f=k.prev;var W=x[0],S=x[x.length-1];for(E=0;E<x.length;E+=1)ue(x[E],k,a);for(E=0;E<u.length;E+=1)_.delete(u[E]);O(W.prev,S.next),O(f,W),O(S,k),r=k,f=S,v-=1,x=[],u=[]}else _.delete(i),ue(i,r,a),O(i.prev,i.next),O(i,f.next),O(f,i),f=i;continue}for(x=[],u=[];r!==null&&r.k!==h;)_.add(r),u.push(r),r=r.next;if(r===null)continue;i=r}x.push(i),f=i,r=i.next}const m=Array.from(_);for(;r;)m.push(r),r=r.next;var H=n&he&&c===0?a:null;if(l){for(v=0;v<m.length;v+=1)(ie=m[v].a)==null||ie.measure();for(v=0;v<m.length;v+=1)(ne=m[v].a)==null||ne.fix()}tt(m,H,()=>{for(var L=0;L<m.length;L+=1){var V=m[L];p.delete(V.k),O(V.prev,V.next)}}),l&&qe(()=>{Be(()=>{var L;for(i of y)(L=i.a)==null||L.apply()})})}function st(t,e,a,s){s&P&&N(t.v,e),s&ee?N(t.i,a):t.i=a}function ye(t,e,a,s,n,o,l,d,c){var p=J;try{var g=(c&P)!==0,r=(c&X)===0,_=g?r?Y(n):fe(n):n,f=c&ee?fe(l):l,y={i:f,v:_,k:o,a:null,e:null,o:t,prev:a,next:s};return a.next=y,s!==null&&(s.prev=y),J=y,y.e=_e(()=>d(e,_,f)),y}finally{J=p}}function ue(t,e,a){for(var s=t.next?t.next.o:a,n=e?e.o:a,o=t.o;o!==s;){var l=o.nextSibling;n.before(o),o=l}}function O(t,e){t.next=e,e!==null&&(e.prev=t)}function F(t,e,a){a=a==null?null:a+"";var s=t.__attributes??(t.__attributes={});R&&(s[e]=t.getAttribute(e),e==="src"||e==="href"||e==="srcset")||s[e]!==(s[e]=a)&&(a===null?t.removeAttribute(e):t.setAttribute(e,a))}function be(t,e){var a=t.__className,s=rt(e);R&&t.className===s?t.__className=s:(a!==s||R&&t.className!==s)&&(e==null?t.removeAttribute("class"):Se(t,s),t.__className=s)}function rt(t){return t??""}function xe(t,e,a){a?t.classList.add(e):t.classList.remove(e)}const it=`linear(
  0, 0.002, 0.01 3.6%, 0.034, 0.074 9.1%, 0.128 11.4%, 0.194 13.4%, 0.271 15%,
  0.344 16.1%, 0.544, 0.66 20.6%, 0.717 22.4%, 0.765 24.6%, 0.808 27.3%,
  0.845 30.4%, 0.883 35.1%, 0.916 40.6%, 0.942 47.2%, 0.963 55%, 0.979 64%,
  0.991 74.4%, 0.998 86.4%, 1
)`;class nt{constructor(e,a={}){G(this,"selector");G(this,"defaults");this.selector=e,this.defaults=a}rect(e){const a=e.getBoundingClientRect().toJSON();return{el:e,...a}}measure(){return Array.from(document.querySelectorAll(this.selector)).map(this.rect)}absolute(e,a){let s=e.getAttribute("style");return e.setAttribute("style",`${s} position: absolute; top: ${a.top}px; left: ${a.left}px; width: ${a.width}px;	height: ${a.height}px;`),()=>e.setAttribute("style",s)}invert(e,a,s,n){const{promise:o,resolve:l}=Promise.withResolvers(),d=a.left-s.left,c=a.top-s.top,p=this.absolute(e,s),g=e.animate([{width:`${a.width}px`,height:`${a.height}px`,transform:`translate(${d}px, ${c}px)`},{width:`${s.width}px`,height:`${s.height}px`,transform:"translate(0px, 0px)"}],{...n,fill:"backwards"});return g.onfinish=()=>{p(),l()},o}flip(e={}){const{duration:a=500,delay:s=0,stagger:n=0,easing:o=it}={...this.defaults,...e},{promise:l,resolve:d}=Promise.withResolvers(),c=[],p=this.measure();return requestAnimationFrame(()=>{const g=this.measure();for(let r=0;r<p.length;r++){const _=this.invert(g[r].el,p[r],g[r],{duration:a,delay:r*n+s,easing:o});c.push(_)}Promise.all(c).then(d)}),l}}function ce(t,e={}){return new nt(t,e)}var lt=M("<div></div>"),ot=M('<div class="bg bg-overlay svelte-5sgzs5"></div> <div class="bg bg-image svelte-5sgzs5"></div> <!>',1);function ft(t,e){te(e,!1);const a=Y([5,1,2,5,0,8,0]);se();var s=ot(),n=U(s),o=C(C(n,!0)),l=C(C(o,!0));j(l,1,()=>I(a),Z,(d,c,p)=>{var g=lt();K(()=>{be(g,`color-${$(A(c))} test-bg svelte-5sgzs5`),F(g,"style",`z-index: ${$(I(a).length-A(p))}; opacity: 0.01; background-image: linear-gradient(to bottom, var(--color-${$(A(c))}-1) , var(--color-${$(A(c))}-2) ); animation-delay:  ${$(A(p)*4-2)}s; animation-duration: ${$(I(a).length*4)}s;`)}),D(d,g)}),D(t,s),ae()}var vt=M('<div class="tile svelte-1tss27h"><div class="tile-text svelte-1tss27h"><h2 class="svelte-1tss27h"> </h2></div></div>');function ut(t,e){te(e,!1);let a=Ge(e,"locationNOK",0,!1),s=16,n=Math.round(s/8);se();var o=vt(),l=z(o),d=z(l),c=z(d);K(()=>{xe(l,"locationNOK",a()),F(d,"style",`--duration: ${$(s)}s; --delay: -${$(n*e.idx)}s;`),Ne(c,e.title)}),D(t,o),ae()}const pe=Ze(""),$e=je({cover:{title:"Mike Royko",pages:["cover"]},"millions-in-his-firing-squad":{title:"Millions in His Firing Squad",pages:["pg_027","pg_028","pg_029"]},"lets-all-drink-to-billy-goat":{title:"Lets All Drink to Billy Goat",pages:["pg_057","pg_058","pg_059"]},"daley-always-a-quota-man":{title:"Daley Always a Quota Man",pages:["pg_093","pg_094","pg_095"]},"daley-embodied-chicago":{title:"Daley Embodied Chicago",pages:["pg_102","pg_103","pg_104","pg_105"]},"give-washington-a-break":{title:"Give Washington a Break",pages:["pg_166","pg_167","pg_168","pg_169"]},"system-a-big-0":{title:"System a Big 0",pages:["pg_182","pg_183","pg_184"]},"it-was-wrigley":{title:"It Was Wrigley",pages:["pg_273","pg_274","pg_275"]}}),Ae=me($e,t=>Object.keys(t)),ct=me(Ae,t=>{const e=[...t,"none"];return e.map(a=>{const s=[];for(let n in e)a!==e[n]&&s.push(`"${e[n]} ${a}"`);return s.join(" ")})});var pt=M('<img alt="page of text written by Mike Royko" class="svelte-1b9ufb0">'),gt=M('<article><div class="child svelte-1b9ufb0"><div class="text-images svelte-1b9ufb0"></div> <!></div></article>'),dt=M('<!> <div class="grid svelte-1b9ufb0"></div>',1);function At(t,e){te(e,!1);const a={};Je(a);const s=()=>B(pe,"$article",a),n=()=>B(Xe,"$page",a),o=()=>B(Ae,"$slugs",a),l=()=>B(ct,"$layouts",a),d=()=>B($e,"$content",a),c=!1,p="transp-text";Ue(pe,n().params.id||"");let g=Y(o().includes(s())?l()[o().indexOf(s())]:l()[l().length-1]),r=Y(!0);async function _(u,b,h){if(I(r)&&b!==n().state.showArticle){N(r,!1),N(g,l()[h]);const i=ce(".box",{duration:1e3});N(r,await i.flip()),ve(`/royko/${b}`,{showArticle:b})}else{N(r,!1),N(g,l()[l().length-1]);const i=ce(".box",{duration:1e3});N(r,await i.flip()),ve("/royko/",{showArticle:"none"})}}se();var f=dt(),y=U(f);ft(y,{locationNOK:c});var x=C(C(y,!0));j(x,9,()=>Object.entries(d()),Z,(u,b,h)=>{let i=()=>A(A(b))[0],v=()=>A(A(b))[1];var w=gt();be(w,`box article-${$(A(h))} svelte-1b9ufb0`);var T=z(w),k=z(T);j(k,9,()=>v().pages,Z,(S,m,H)=>{var q=pt();K(()=>F(q,"src",`${$(et)}/${$(p)}/991625758805867_ord_f_548.52_r684_1999_${$(A(m))}.webp`)),D(S,q)});var W=C(C(k,!0));Qe(W,()=>(n().state.showArticle||s())!==i(),S=>{var m=Ie(),H=U(m);ut(H,{get title(){return v().title},idx:A(h)}),D(S,m)}),K(()=>{F(w,"style",`cursor: ${$(I(r)?"pointer":"")}; grid-area: ${$(i())}; `),xe(w,"active",(n().state.showArticle||s())===i()&&I(r))}),Ce("click",w,function(...S){const m=I(r)?H=>_(H,i(),A(h)):"";return m==null?void 0:m.apply(this,S)},!1),D(u,w)}),K(()=>F(x,"style",`grid-template-areas: ${$(I(g))};`)),D(t,f),ae()}export{At as component};

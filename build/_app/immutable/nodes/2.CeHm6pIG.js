var ke=Object.defineProperty;var Ee=(t,e,a)=>e in t?ke(t,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[e]=a;var J=(t,e,a)=>(Ee(t,typeof e!="symbol"?e+"":e,a),a);import{h as q,l as le,n as pe,g as U,i as oe,p as Se,o as Ce,a as T,t as H,b as k,q as b,f as j,s as Ne,c as z,d as Ie,r as Te}from"../chunks/disclose-version.BOVRfkSZ.js";import{k as Oe,I as Re,H as De,l as qe,D as He,m as _e,n as he,o as Me,_ as ze,A as Le,d as Be,$ as W,t as I,a0 as ae,a1 as Z,x as G,W as ve,a2 as Ke,a3 as Fe,a4 as Pe,a5 as ye,a6 as We,Q as Ye,S as Qe,a7 as Ge,r as L,q as Ve,a as se,p as re,g as O,a8 as A}from"../chunks/runtime.CKWRzqfN.js";import{p as Je,i as fe}from"../chunks/props.BtFam5Kb.js";import{i as ie}from"../chunks/lifecycle.Dz8b9rid.js";import{u as Ue,a as Xe,s as F,p as je}from"../chunks/stores.DMwBeWDU.js";import{d as me,w as Ze,r as et,p as ce,b as tt}from"../chunks/entry.BCt9f9zK.js";let X=null;function ee(t,e){return e}function at(t,e,a){for(var s=[],n=t.length,o=0;o<n;o++)Ke(t[o].e,s,!0);if(n>0&&s.length===0&&e!==null){var l=e.parentNode;l.textContent="",l.append(e)}Fe(s,()=>{for(var d=0;d<n;d++)Pe(t[d].e);a!==void 0&&a()})}function te(t,e,a,s,n,o=null){var l={flags:e,items:new Map,next:null},d=(e&ye)!==0;if(d){var g=t;t=q?le(g.firstChild):g.appendChild(pe())}var u=null;Oe(()=>{var p=a(),r=Re(p)?p:p==null?[]:Array.from(p),_=r.length,f=l.flags;f&Z&&!Ye(r)&&!(Qe in r)&&(f^=Z,f&Ge&&!(f&W)&&(f^=W));let y=!1;if(q){var m=t.data===De;m!==(_===0)&&(qe(oe),U(!1),y=!0)}if(q){for(var v=oe[0],x=l,h,i=0;i<_;i++){if(v.nodeType!==8||v.data!==He){y=!0,U(!1);break}var c=v;v=le(v);var w=r[i],R=s(w,i);h=be(c,v,x,null,w,R,i,n,f),l.items.set(R,h),v=v.nextSibling,x=h}if(_>0)for(;v!==t;){var C=v.nextSibling;v.remove(),v=C}}q||st(r,l,t,n,f,s),o!==null&&(_===0?u?_e(u):u=he(()=>o(t)):u!==null&&Me(u,()=>{u=null})),y&&U(!0)})}function st(t,e,a,s,n,o){var $,B,K,ne;var l=(n&We)!==0,d=(n&(W|ae))!==0,g=t.length,u=e.items,p=e.next,r=p,_=new Set,f=e,y=new Set,m=[],v=[],x,h,i,c;if(l)for(c=0;c<g;c+=1)x=t[c],h=o(x,c),i=u.get(h),i!==void 0&&(($=i.a)==null||$.measure(),y.add(i));for(c=0;c<g;c+=1){if(x=t[c],h=o(x,c),i=u.get(h),i===void 0){var w=Se(pe()),R=r?r.o:a;R.before(w),f=be(w,R,f,f.next,x,h,c,s,n),u.set(h,f),m=[],v=[],r=f.next;continue}if(d&&rt(i,x,c,n),i.e.f&ze&&(_e(i.e),l&&((B=i.a)==null||B.unfix(),y.delete(i))),i!==r){if(_.has(i)){if(m.length<v.length){var C=v[0],E;f=C.prev;var Y=m[0],Q=m[m.length-1];for(E=0;E<m.length;E+=1)ue(m[E],C,a);for(E=0;E<v.length;E+=1)_.delete(v[E]);D(Y.prev,Q.next),D(f,Y),D(Q,C),r=C,f=Q,c-=1,m=[],v=[]}else _.delete(i),ue(i,r,a),D(i.prev,i.next),D(i,f.next),D(f,i),f=i;continue}for(m=[],v=[];r!==null&&r.k!==h;)_.add(r),v.push(r),r=r.next;if(r===null)continue;i=r}m.push(i),f=i,r=i.next}const S=Array.from(_);for(;r;)S.push(r),r=r.next;var N=n&ye&&g===0?a:null;if(l){for(c=0;c<S.length;c+=1)(K=S[c].a)==null||K.measure();for(c=0;c<S.length;c+=1)(ne=S[c].a)==null||ne.fix()}at(S,N,()=>{for(var M=0;M<S.length;M+=1){var V=S[M];u.delete(V.k),D(V.prev,V.next)}}),l&&Le(()=>{Be(()=>{var M;for(i of y)(M=i.a)==null||M.apply()})})}function rt(t,e,a,s){s&W&&I(t.v,e),s&ae?I(t.i,a):t.i=a}function be(t,e,a,s,n,o,l,d,g){var u=X;try{var p=(g&W)!==0,r=(g&Z)===0,_=p?r?G(n):ve(n):n,f=g&ae?ve(l):l,y={i:f,v:_,k:o,a:null,e:null,o:t,prev:a,next:s};return a.next=y,s!==null&&(s.prev=y),X=y,y.e=he(()=>d(e,_,f)),y}finally{X=u}}function ue(t,e,a){for(var s=t.next?t.next.o:a,n=e?e.o:a,o=t.o;o!==s;){var l=o.nextSibling;n.before(o),o=l}}function D(t,e){t.next=e,e!==null&&(e.prev=t)}function P(t,e,a){a=a==null?null:a+"";var s=t.__attributes??(t.__attributes={});q&&(s[e]=t.getAttribute(e),e==="src"||e==="href"||e==="srcset")||s[e]!==(s[e]=a)&&(a===null?t.removeAttribute(e):t.setAttribute(e,a))}function xe(t,e){var a=t.__className,s=it(e);q&&t.className===s?t.__className=s:(a!==s||q&&t.className!==s)&&(e==null?t.removeAttribute("class"):Ce(t,s),t.__className=s)}function it(t){return t??""}function $e(t,e,a){a?t.classList.add(e):t.classList.remove(e)}function nt(t,e,a){var s=Ve(t,e);s&&s.set&&(t[e]=a,L(()=>()=>{t[e]=null}))}const lt=`linear(
  0, 0.002, 0.01 3.6%, 0.034, 0.074 9.1%, 0.128 11.4%, 0.194 13.4%, 0.271 15%,
  0.344 16.1%, 0.544, 0.66 20.6%, 0.717 22.4%, 0.765 24.6%, 0.808 27.3%,
  0.845 30.4%, 0.883 35.1%, 0.916 40.6%, 0.942 47.2%, 0.963 55%, 0.979 64%,
  0.991 74.4%, 0.998 86.4%, 1
)`;class ot{constructor(e,a={}){J(this,"selector");J(this,"defaults");this.selector=e,this.defaults=a}rect(e){const a=e.getBoundingClientRect().toJSON();return{el:e,...a}}measure(){return Array.from(document.querySelectorAll(this.selector)).map(this.rect)}absolute(e,a){let s=e.getAttribute("style");return e.setAttribute("style",`${s} position: absolute; top: ${a.top}px; left: ${a.left}px; width: ${a.width}px;	height: ${a.height}px;`),()=>e.setAttribute("style",s)}invert(e,a,s,n){const{promise:o,resolve:l}=Promise.withResolvers(),d=a.left-s.left,g=a.top-s.top,u=this.absolute(e,s),p=e.animate([{width:`${a.width}px`,height:`${a.height}px`,transform:`translate(${d}px, ${g}px)`},{width:`${s.width}px`,height:`${s.height}px`,transform:"translate(0px, 0px)"}],{...n,fill:"backwards"});return p.onfinish=()=>{u(),l()},o}flip(e={}){const{duration:a=500,delay:s=0,stagger:n=0,easing:o=lt}={...this.defaults,...e},{promise:l,resolve:d}=Promise.withResolvers(),g=[],u=this.measure();return requestAnimationFrame(()=>{const p=this.measure();for(let r=0;r<u.length;r++){const _=this.invert(p[r].el,u[r],p[r],{duration:a,delay:r*n+s,easing:o});g.push(_)}Promise.all(g).then(d)}),l}}function ge(t,e={}){return new ot(t,e)}var vt=H("<div></div>"),ft=H('<div class="bg bg-toppiest svelte-jf7t1g"></div> <div class="bg bg-overlay svelte-jf7t1g"></div> <div class="bg bg-image svelte-jf7t1g"></div> <!>',1);function ct(t,e){se(e,!1);const a=G([5,1,2,5,0,8,0]);ie();var s=ft(),n=j(s),o=k(k(n,!0)),l=k(k(o,!0)),d=k(k(l,!0));te(d,1,()=>O(a),ee,(g,u,p)=>{var r=vt();L(()=>{xe(r,`color-${b(A(u))} test-bg svelte-jf7t1g`),P(r,"style",`z-index: ${b(O(a).length-A(p))}; opacity: 0.01; background-image: linear-gradient(to bottom, var(--color-${b(A(u))}-1) , var(--color-${b(A(u))}-2) ); animation-delay:  ${b(A(p)*4-2)}s; animation-duration: ${b(O(a).length*4)}s;`)}),T(g,r)}),T(t,s),re()}var ut=H('<div class="tile svelte-1h0q0r3"><div class="tile-text svelte-1h0q0r3"><h2 class="svelte-1h0q0r3"> </h2></div></div>');function gt(t,e){se(e,!1);let a=Je(e,"locationNOK",0,!1),s=16,n=Math.round(s/8);ie();var o=ut(),l=z(o),d=z(l),g=z(d);L(()=>{$e(l,"locationNOK",a()),P(d,"style",`--duration: ${b(s)}s; --delay: -${b(n*e.idx)}s;`),Ne(g,e.title)}),T(t,o),re()}const de=Ze(""),Ae=et({cover:{title:"Mike Royko",pages:["cover"]},"millions-in-his-firing-squad":{title:"Millions in His Firing Squad",pages:["pg_027","pg_028","pg_029"]},"lets-all-drink-to-billy-goat":{title:"Lets All Drink to Billy Goat",pages:["pg_057","pg_058","pg_059"]},"daley-always-a-quota-man":{title:"Daley Always a Quota Man",pages:["pg_093","pg_094","pg_095"]},"daley-embodied-chicago":{title:"Daley Embodied Chicago",pages:["pg_102","pg_103","pg_104","pg_105"]},"give-washington-a-break":{title:"Give Washington a Break",pages:["pg_166","pg_167","pg_168","pg_169"]},"system-a-big-0":{title:"System a Big 0",pages:["pg_182","pg_183","pg_184"]},"it-was-wrigley":{title:"It Was Wrigley",pages:["pg_273","pg_274","pg_275"]}}),we=me(Ae,t=>Object.keys(t)),dt=me(we,t=>{const e=[...t,"none"];return e.map(a=>{const s=[];for(let n in e)a!==e[n]&&s.push(`"${e[n]} ${a}"`);return s.join(" ")})});var pt=H('<p class="locnok svelte-zy1v55">Due to licensing issues, the text can only <br>be viewed on site. Come visit!</p>'),_t=H('<img alt="page of text written by Mike Royko" class="svelte-zy1v55">'),ht=H('<article><div class="child svelte-zy1v55"><div class="text-images svelte-zy1v55"><!> <!></div> <!></div></article>'),yt=H('<!> <div class="grid svelte-zy1v55"></div>',1);function Et(t,e){se(e,!1);const a={};Ue(a);const s=()=>F(de,"$article",a),n=()=>F(je,"$page",a),o=()=>F(we,"$slugs",a),l=()=>F(dt,"$layouts",a),d=()=>F(Ae,"$content",a),g=!1,u="transp-text";Xe(de,n().params.id||"");let p=G(o().includes(s())?l()[o().indexOf(s())]:l()[l().length-1]),r=G(!0);async function _(v,x){if(O(r)&&v!==n().state.showArticle){I(r,!1),I(p,l()[x]);const h=ge(".box",{duration:1e3});I(r,await h.flip()),ce(`/royko/${v}`,{showArticle:v})}else{I(r,!1),I(p,l()[l().length-1]);const h=ge(".box",{duration:1e3});I(r,await h.flip()),ce("/royko/",{showArticle:"none"})}}ie();var f=yt(),y=j(f);ct(y,{locationNOK:g});var m=k(k(y,!0));return te(m,9,()=>Object.entries(d()),ee,(v,x,h)=>{let i=()=>A(A(x))[0],c=()=>A(A(x))[1];var w=ht();xe(w,`box article-${b(A(h))} svelte-zy1v55`);var R=z(w),C=z(R),E=z(C);fe(E,()=>g,N=>{var $=pt();T(N,$)});var Y=k(k(E,!0));te(Y,1,()=>c().pages,ee,(N,$,B)=>{var K=_t();L(()=>P(K,"src",`${b(tt)}/${b(u)}/991625758805867_ord_f_548.52_r684_1999_${b(A($))}.webp`)),T(N,K)});var S=k(k(C,!0));fe(S,()=>(n().state.showArticle||s())!==i(),N=>{var $=Ie(),B=j($);gt(B,{get title(){return c().title},idx:A(h)}),T(N,$)}),L(()=>{P(w,"style",`cursor: ${b(O(r)?"pointer":"")}; grid-area: ${b(i())}; `),$e(w,"active",(n().state.showArticle||s())===i()&&O(r))}),Te("click",w,function(...N){const $=O(r)?()=>_(i(),A(h)):"";return $==null?void 0:$.apply(this,N)},!1),T(v,w)}),L(()=>P(m,"style",`grid-template-areas: ${b(O(p))};`)),T(t,f),nt(e,"handleClick",_),re({handleClick:_})}export{Et as component};
